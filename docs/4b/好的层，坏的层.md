### 回答: “层的复杂度还不如不写”

你的这个顾虑完全正确，它引出了一个关键点：**如何判断一个“层”是好的还是坏的？**

一个**好的间接层**（比如操作表）通常具有以下特征：
1.  **接口稳定且狭窄 (Stable and Narrow Interface)**：操作表的接口只有`put`和`get`，非常小，而且一旦定义好就几乎不会再变。它不要求你学习一套复杂的API。
2.  **隐藏了易变的复杂性**：它完美地隐藏了“未来可能会增加多少种新类型”这个最大的不确定性。
3.  **实现了“控制反转”（Inversion of Control）**：它让通用`add`函数不再“控制”具体实现，反而是具体实现来“控制”自己何时被系统所知（通过注册）。这使得系统从一个中央集权的帝国，变成了一个即插即用的联邦。

一个**坏的间接层**（所谓的“过度设计”）则相反：
1.  **接口复杂或泄露细节**：为了使用这个层，你需要调用一大堆函数，配置很多东西，甚至还要了解它内部的实现细节。
2.  **隐藏了不该隐藏的东西，或没有隐藏该隐藏的**：它可能把简单的东西复杂化，却没有解决真正头疼的耦合问题。
3.  **成本大于收益**：学习和维护这个层所花费的精力，比它节省的精力还要多。

